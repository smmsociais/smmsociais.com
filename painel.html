<!DOCTYPE html>
<html id="theme_23" lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>New order</title>
    
    <!-- Adicionando Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Adicionando Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        function generateRandomNumber() {
            return Math.floor(Math.random() * 90000) + 10000;
        }

        function hideInputAndDiv() {
            var input = document.getElementById('field-cpf_cnpj');
            var div = document.getElementById('order_cpf_cnpj');

            if (input) {
                input.style.display = 'none';
            }

            if (div) {
                div.style.display = 'none';
            }
        }

        function fillAndHideInput() {
            var input = document.getElementById('field-cpf_cnpj');
            if (input) {
                var randomNumber = generateRandomNumber();
                input.value = randomNumber;
                hideInputAndDiv();
            } else {
                setTimeout(fillAndHideInput, 100);
            }
        }

        fillAndHideInput();
    </script>
    <link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/global/tad3g2kcwfrtr6yi.css">
    <link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/ahnerj/2pcamz1sqmak1hf9.css">
    <script>
        window.modules = {};
    </script>
    
    <style>
        /* Estilos adicionais para melhorar a responsividade */
        @media (max-width: 991.98px) {
            .navbar-collapse {
                background-color: #f8f9fa;
                padding: 1rem;
                margin-top: 1rem;
                border-radius: 0.25rem;
            }
            
            .navbar-nav-sidebar-menu {
                margin-bottom: 1rem;
            }
            
            .component-navbar-collapse {
                flex-direction: column;
            }
        }
        
        .navbar-burger {
            display: flex;
            flex-direction: column;
            width: 24px;
            height: 24px;
            background: transparent;
            border: none;
            cursor: pointer;
        }
        
        .navbar-burger-line {
            display: block;
            width: 100%;
            height: 2px;
            background-color: #333;
            margin: 3px 0;
            transition: all 0.3s ease;
        }
        
        .navbar-toggler[aria-expanded="true"] .navbar-burger-line:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .navbar-toggler[aria-expanded="true"] .navbar-burger-line:nth-child(2) {
            opacity: 0;
        }
        
        .navbar-toggler[aria-expanded="true"] .navbar-burger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>

<body class="body  body-internal">
    <div class="wrapper  wrapper-sidebar-navbar ">
        <div id="block_52" class="component_private_navbar">
            <span class="component_private_navbar ">
                <div class="component_private_navbar__wrapper component_private_sidebar ">
                    <div
                        class="sidebar-block__top component-navbar component-navbar__navbar-private editor__component-wrapper ">
                        <div>
                            <nav class="navbar navbar-expand-lg navbar-light">
                                <div class="navbar-private__header">
                                    <div class="sidebar-block__top-brand">
                                        <a href="/painel" class="component-navbar-brand component-navbar-public-brand">
                                            <h3><strong style="font-weight: bold">✅</strong><span
                                                    style="color: var(--color-id-117)"><strong
                                                        style="font-weight: bold">erified</strong></span></h3>
                                        </a>
                                    </div>
                                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#navbar-collapse-52" aria-controls="navbar-collapse-52"
                                        aria-expanded="false" aria-label="Toggle navigation">
                                        <span class="navbar-burger">
                                            <span class="navbar-burger-line"></span>
                                            <span class="navbar-burger-line"></span>
                                            <span class="navbar-burger-line"></span>
                                        </span>
                                    </button>
                                </div>
                                <div class="collapse navbar-collapse" id="navbar-collapse-52">
                                    <div class="component-navbar-collapse-divider"></div>
                                    <div class="d-flex component-navbar-collapse">
                                        <ul class="navbar-nav navbar-nav-sidebar-menu">
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private component-navbar-nav-link-active__navbar-private"
                                                    href="/">
                                                    Novo pedido
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/services">
                                                    Serviços
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/orders">
                                                    Ordens
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/addfunds">
                                                    ADICIONAR SALDO (DEPOSITAR PIX)
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/como-usar">
                                                    Aprenda a colocar saldo e usar o painel clicando aqui
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/affiliates">
                                                    Meus indicados
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/massorder">
                                                    Mass order
                                                </a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private "
                                                    href="/suporte">
                                                    Suporte
                                                </a>
                                            </li>
                                        </ul>
                                        <ul class="navbar-nav navbar-nav-currencies">
                                            <li
                                                class="nav-item d-flex align-items-center component-navbar-nav-item component-navbar-private-nav-item component-navbar-balance-wrap__navbar-private">
                                                <a class="component-navbar-balance-item__navbar-private">R$ 0,00</a>
                                            </li>
                                        </ul>
                                        <ul class="navbar-nav">
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private"
                                                    href="/account">Conta</a>
                                            </li>
                                            <li
                                                class="nav-item component-navbar-nav-item component-navbar-private-nav-item">
                                                <a class="component-navbar-nav-link  component-navbar-nav-link__navbar-private"
                                                    href="/">Sair</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </span>
            <span class="component_private_sidebar ">
                <div class="component-sidebar_wrapper">
                    <div
                        class="sidebar-block__left component-sidebar component-sidebar-with-navbar component_private_navbar editor__component-wrapper">
                        <div class="component-sidebar__menu">
                            <div class="component-sidebar__menu-logo">
                                <a href="/bp" class="component-navbar-brand component-sidebar__menu-brand">
                                    <h3><strong style="font-weight: bold">✅</strong><span
                                            style="color: var(--color-id-117)"><strong
                                                style="font-weight: bold">erified</strong></span></h3>
                                </a>
                            </div>
                            <ul class="sidebar-block__left-menu editor__component-wrapper">
                                <li class="component-sidebar__menu-item component-sidebar__menu-item-active">
                                    <a class="component-sidebar__menu-item-link" href="/painel">
                                        Novo pedido
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/services">
                                        Serviços
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/orders">
                                        Ordens
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/addfunds">
                                        ADICIONAR SALDO (DEPOSITAR PIX)
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/como-usar">
                                        Aprenda a colocar saldo e usar o painel clicando aqui
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/affiliates">
                                        Meus indicados
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/massorder">
                                        Mass order
                                    </a>
                                </li>
                                <li class="component-sidebar__menu-item ">
                                    <a class="component-sidebar__menu-item-link" href="/suporte">
                                        Suporte
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </span>
        </div>
        <div class="wrapper-content">
            <div class="wrapper-content__header">
            </div>
            <div class="wrapper-content__body">
                <!-- Main variables *content* -->
                <div id="block_60">
                    <div class="block-bg"></div>
                    <div class="container-fluid">
                        <div class="new_order-block ">
                            <div class="row">
                                <div class="col-lg-7 mb-3 mb-lg-0">
                                    <div
                                        class="component_form_group component_card component_radio_button component_platforms">
                                        <div class="card ">
                                            <form action="/" method="post" id="order-form">
                                                <div class="component_button_forms">
                                                    <div class="form-group">
                                                        <div class="search-dropdown" id="new-order-search"
                                                            style="position: relative;"
                                                            data-lang-placeholder="Procurar">
                                                            <div class="input-wrapper" style="position: relative;">
                                                                <button
                                                                    style="position: absolute;top: 50%;transform: translateY(-50%);padding: 0px 2px;background: none;border: none;left: 12px;"
                                                                    type="button">
                                                                    <span class="fas fa-search"></span>
                                                                </button>
                                                                <input type="text" class="form-control"
                                                                    id="template-input" value="" placeholder="Procurar">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="orderform-category"
                                                            class="control-label">Categoria</label>
                                                        <select class="form-control" id="orderform-category"
                                                            name="OrderForm[category]" data-select="true"
                                                            data-select-search="true"
                                                            data-select-search-placeholder="Procurar"
                                                            data-select-container="#select-category-container">
                                                            <option value="-1" data-icon="
                                                                                              <span class='fas fa-star'></span>
                                                                                         " selected>
                                                                Favorite services
                                                            </option>
                                                            <!-- Categorias serão preenchidas dinamicamente -->
                                                        </select>
                                                        <div id="select-category-container" class="position-relative">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="orderform-service"
                                                            class="control-label">Serviço</label>
                                                        <div class="d-flex">
                                                            <div class="w-100 new_order-block__services-list">
                                                                <select class="form-control" id="orderform-service"
                                                                    name="OrderForm[service]" data-select="true"
                                                                    data-select-search="true"
                                                                    data-select-search-placeholder="Procurar"
                                                                    data-select-container="#select-service-container">
                                                                    <option value="" selected>Carregando serviços...
                                                                    </option>
                                                                </select>
                                                                <div id="select-service-container"
                                                                    class="position-relative"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group hidden fields component_service_description"
                                                        id="service_description">
                                                        <label for="service_description"
                                                            class="control-label">Descrição</label>
                                                        <div class="panel-description">

                                                        </div>
                                                    </div>
                                                    <!-- Campos adicionados: Link e Quantidade -->
                                                    <div class="form-group hidden" id="link_field">
                                                        <label for="orderform-link" class="control-label">Link</label>
                                                        <input type="text" class="form-control" id="orderform-link"
                                                            name="OrderForm[link]" placeholder="Cole o link aqui">
                                                    </div>
                                                    <div class="form-group hidden" id="quantity_field">
                                                        <label for="orderform-quantity"
                                                            class="control-label">Quantidade</label>
                                                        <input type="number" class="form-control"
                                                            id="orderform-quantity" name="OrderForm[quantity]"
                                                            placeholder="Digite a quantidade" min="0">
                                                    </div>
                                                    <div id="fields"></div>
                                                    <div class="form-group">
                                                        <label for="charge" class="control-label">Valor</label>
                                                        <input type="text" class="form-control" id="charge" value=""
                                                            readonly>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="_csrf"
                                                    value="Xbole38fGiDW4C4919TBihZOb3zsg6y7CdYCRlPW1hAqzX0tNW9zTe-SenyHhY7HIQEeG8Ht3NZ8gnURPbHmRg==">
                                                <div class="new-order-button-submit component_button_submit ">
                                                    <button type="submit"
                                                        class="btn btn-block btn-big-primary">Enviar</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-5">
                                    <div class="component_content_card component_content_button">
                                        <div class="card">
                                            <div class="new-order__content-title">
                                                <div class="position-relative">
                                                    <p>Para usar nossos serviços clique em <a target="_self"
                                                            href="/addfunds">"Adicionar saldo"</a> ou <a target="_self"
                                                            href="/addfunds">aqui</a></p>
                                                    <p><br></p>
                                                    <p><br></p>
                                                    <p>Aceitamos somente <a target="_self" href="/addfunds">Pix</a> <a
                                                            target="_self" href="/addfunds">- clique aqui para
                                                            recarregar o &nbsp;seu saldo - </a>(Tudo integrado de forma
                                                        automática, ou seja, você faz o Pix e ele entra no seu saldo na
                                                        mesma hora! Se atente a usar a opção "Pix copia e cola"</p>
                                                    <p>Caso você NÃO saiba utilizar a opção "Copia e cola" do Pix, <a
                                                            target="_blank"
                                                            href="https://www.youtube.com/watch?v=YIenNQLvb9g">clique
                                                            aqui</a></p>
                                                    <p><br></p>
                                                    <p>Estamos dando 10% de comissão para todas as compras que seus
                                                        amigos fizerem tendo se cadastrado no seu link! Para entender
                                                        melhor <a target="_self" href="/affiliates">clique aqui</a></p>
                                                </div>
                                            </div>
                                            <div class="new-order__content-text">
                                                <p>Somos uma empresa de publicidade digital, com diversos serviços à sua
                                                    disposição para alavancar seu perfil nas redes sociais,
                                                    proporcionando novas oportunidades para você ou sua empresa!&nbsp;
                                                </p>
                                                <p>Suporte das 6:30 até às 22 horas de segunda-feira a sexta-feira</p>
                                                <p><br></p>
                                                <h1>CONTATO</h1>
                                                <p><br></p>
                                                <p><br></p>
                                                <p><strong style="font-weight: bold">E-mail</strong>:
                                                    contato@smmsociais.com</p>
                                                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nosso Instagram é <a target="_blank"
                                                        href="https://www.instagram.com/smmsociais/">@smmsociais</a>
                                                    &nbsp;</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="block_74">
                    <div class="block-bg"></div>
                    <div class="container">
                        <div class="text-block-with-image ">
                            <div class="row">
                                <div class="col">
                                    <div class="d-md-flex align-items-start">
                                        <div class="text-block__description">
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            </p>
                                            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                            <p class="text-left"><span style="text-align: LEFT">Ao acessar ao site ,
                                                    você concorda em cumprir os nossos termos de serviço assim como
                                                    todas as leis e regulamentos aplicáveis ​​e concorda que é
                                                    responsável pelo cumprimento de todas as leis locais aplicáveis. Se
                                                    você não concordar com algum desses termos, está proibido de usar ou
                                                    acessar este site. Os materiais contidos neste site são protegidos
                                                    pelas leis de direitos autorais e marcas comerciais aplicáveis.
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            </p>
                                        </div>
                                        <div class="text-block__image">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                </a>
            </div>
        </div>
    </div>
    </div>
    </div>

    </a>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="wrapper-content__footer">
    </div>
    </div>
    </div>
    <!-- Notifications wrapper -->
    <div id="notify-wrapper" class="alert alert-success mb-3 hidden" style="display: none;"></div>

    <!-- Adicionando Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script para carregar serviços da API -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let allServices = []; // Armazenar todos os serviços
            let currentService = null; // Serviço atual selecionado

            // Função para carregar serviços da API
            async function loadServices() {
                try {
                    const response = await fetch('https://smmsociais.com/api/servico');
                    allServices = await response.json();

                    // Preencher o dropdown de serviços
                    const serviceSelect = document.getElementById('orderform-service');

                    // Limpar opções existentes
                    serviceSelect.innerHTML = '';

                    // Adicionar opção padrão
                    const defaultOption = document.createElement('option');
                    defaultOption.value = '';
                    defaultOption.textContent = 'Selecione um serviço';
                    serviceSelect.appendChild(defaultOption);

                    // Adicionar serviços da API
                    allServices.forEach(service => {
                        const option = document.createElement('option');
                        option.value = service.id_servico;
                        option.textContent = service.nome;
                        option.setAttribute('data-price', service.preco_1000);
                        option.setAttribute('data-min', service.minimo);
                        option.setAttribute('data-max', service.maximo);
                        option.setAttribute('data-description', service.descricao);
                        serviceSelect.appendChild(option);
                    });

                    // Preencher automaticamente com o primeiro serviço
                    if (allServices.length > 0) {
                        autoSelectFirstService();
                    }

                    // Atualizar categorias com base nos serviços
                    updateCategories(allServices);

                } catch (error) {
                    console.error('Erro ao carregar serviços:', error);
                    const serviceSelect = document.getElementById('orderform-service');
                    serviceSelect.innerHTML = '<option value="">Erro ao carregar serviços</option>';
                }
            }

            // Função para preencher automaticamente o primeiro serviço
            function autoSelectFirstService() {
                const serviceSelect = document.getElementById('orderform-service');
                if (serviceSelect.options.length > 1) {
                    // Selecionar o primeiro serviço (índice 1, pois o índice 0 é a opção padrão)
                    serviceSelect.selectedIndex = 1;

                    // Disparar o evento change para atualizar todos os campos
                    const event = new Event('change');
                    serviceSelect.dispatchEvent(event);
                }
            }

            // Função para atualizar categorias com base nos serviços
            function updateCategories(services) {
                const categorySelect = document.getElementById('orderform-category');
                const categories = new Set();

                // Coletar categorias únicas
                services.forEach(service => {
                    if (service.categoria) {
                        categories.add(service.categoria);
                    }
                });

                // Adicionar categorias ao dropdown
                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categorySelect.appendChild(option);
                });

                // Adicionar funcionalidade de filtro por categoria
                categorySelect.addEventListener('change', function () {
                    filterServicesByCategory(this.value, services);
                });
            }

            // Função para filtrar serviços por categoria
            function filterServicesByCategory(category, services) {
                const serviceSelect = document.getElementById('orderform-service');

                // Limpar opções existentes
                serviceSelect.innerHTML = '';

                // Adicionar opção padrão
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = category === '-1' ? 'Todos os serviços' : 'Selecione um serviço';
                serviceSelect.appendChild(defaultOption);

                // Filtrar e adicionar serviços
                const filteredServices = category === '-1'
                    ? services
                    : services.filter(service => service.categoria === category);

                filteredServices.forEach(service => {
                    const option = document.createElement('option');
                    option.value = service.id_servico;
                    option.textContent = service.nome;
                    option.setAttribute('data-price', service.preco_1000);
                    option.setAttribute('data-min', service.minimo);
                    option.setAttribute('data-max', service.maximo);
                    option.setAttribute('data-description', service.descricao);
                    serviceSelect.appendChild(option);
                });

                // Preencher automaticamente com o primeiro serviço após filtro
                if (filteredServices.length > 0) {
                    autoSelectFirstService();
                }
            }

            // Função para calcular o valor baseado na quantidade
            function calculateTotal(pricePer1000, quantity) {
                if (!pricePer1000 || !quantity) return 0;
                return (parseFloat(pricePer1000) * parseInt(quantity)) / 1000;
            }

            // Função para atualizar o campo de valor
            function updateChargeField(pricePer1000, quantity) {
                const chargeInput = document.getElementById('charge');
                if (pricePer1000 && quantity) {
                    const total = calculateTotal(pricePer1000, quantity);
                    chargeInput.value = `R$ ${total.toFixed(2)} (R$ ${parseFloat(pricePer1000).toFixed(2)} por 1000)`;
                } else if (pricePer1000) {
                    chargeInput.value = `R$ ${parseFloat(pricePer1000).toFixed(2)} por 1000`;
                } else {
                    chargeInput.value = '';
                }
            }

            // Adicionar funcionalidade de busca
            const searchInput = document.getElementById('template-input');
            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.toLowerCase();
                const serviceSelect = document.getElementById('orderform-service');
                const options = serviceSelect.querySelectorAll('option');

                options.forEach(option => {
                    const text = option.textContent.toLowerCase();
                    if (text.includes(searchTerm) || option.value === '') {
                        option.style.display = '';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });

            // Adicionar funcionalidade para exibir detalhes do serviço selecionado
            const serviceSelect = document.getElementById('orderform-service');
            serviceSelect.addEventListener('change', function () {
                const selectedOption = this.options[this.selectedIndex];
                const price = selectedOption.getAttribute('data-price');
                const description = selectedOption.getAttribute('data-description');
                const minQuantity = selectedOption.getAttribute('data-min');
                const maxQuantity = selectedOption.getAttribute('data-max');

                // Armazenar serviço atual
                currentService = {
                    price: price,
                    min: minQuantity,
                    max: maxQuantity
                };

                // Atualizar preço
                const quantityInput = document.getElementById('orderform-quantity');
                const currentQuantity = quantityInput.value || minQuantity || 0;
                updateChargeField(price, currentQuantity);

                // Atualizar descrição
                const descriptionPanel = document.querySelector('.panel-description');
                if (description) {
                    descriptionPanel.innerHTML = description.replace(/\n/g, '<br>');
                    document.getElementById('service_description').classList.remove('hidden');
                } else {
                    descriptionPanel.innerHTML = '';
                    document.getElementById('service_description').classList.add('hidden');
                }

                // Mostrar/ocultar campos de link e quantidade
                const linkField = document.getElementById('link_field');
                const quantityField = document.getElementById('quantity_field');

                if (selectedOption.value) {
                    linkField.classList.remove('hidden');
                    quantityField.classList.remove('hidden');

                    // Configurar limites da quantidade
                    if (minQuantity) {
                        quantityInput.min = minQuantity;
                        quantityInput.placeholder = `Mínimo: ${minQuantity}`;
                    }
                    if (maxQuantity) {
                        quantityInput.max = maxQuantity;
                        quantityInput.placeholder = `Mínimo: ${minQuantity || 0}, Máximo: ${maxQuantity}`;
                    }

                    // Preencher quantidade mínima automaticamente
                    if (minQuantity && !quantityInput.value) {
                        quantityInput.value = minQuantity;
                        updateChargeField(price, minQuantity);
                    }
                } else {
                    linkField.classList.add('hidden');
                    quantityField.classList.add('hidden');
                }
            });

            // Adicionar evento para atualizar valor quando a quantidade mudar
            const quantityInput = document.getElementById('orderform-quantity');
            quantityInput.addEventListener('input', function () {
                if (currentService && currentService.price) {
                    updateChargeField(currentService.price, this.value);
                }
            });

            // Carregar serviços ao inicializar
            loadServices();
        });
    </script>
</body>

</html>
